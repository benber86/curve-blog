const chainDescData = {'arbitrum': {'All': {'count': 1845.0, 'mean': 400912.0323557143, 'std': 2879879.94472489, 'min': 0.0, '25%': 63.005205056668835, '50%': 3657.1735042085124, '75%': 47107.57285160102, 'max': 75033722.12469396, 'gini': 89.26598171178821}, 'Trading': {'count': 539.0, 'mean': 572816.1913586247, 'std': 4412973.058546912, 'min': 0.0, '25%': 1.0000093446147983e-18, '50%': 562.0097267943164, '75%': 20656.274768555693, 'max': 75033722.12469396, 'gini': 92.59395667691321}, 'LP': {'count': 712.0, 'mean': 771112.9070241872, 'std': 3845215.135410417, 'min': 0.0, '25%': 3351.2472576136547, '50%': 32062.851825941187, '75%': 215090.80779700138, 'max': 75033722.12469396, 'gini': 80.9254155189836}, 'UI Router': {'count': 1029.0, 'mean': 301376.56027321063, 'std': 1406100.269697568, 'min': 0.0, '25%': 193.18846554304864, '50%': 5773.164049285097, '75%': 56972.69176721728, 'max': 21982305.55437067, 'gini': 84.85859621246338}, 'Lending': {'count': 485.0, 'mean': 245844.38559163013, 'std': 1196326.8851137639, 'min': 0.0, '25%': 935.5155043912769, '50%': 10848.539987723756, '75%': 63831.83084157441, 'max': 13274363.92530237, 'gini': 83.18737938504256}}, 'all': {'All': {'count': 10163.0, 'mean': 435197.919822705, 'std': 10998126.29118832, 'min': 0.0, '25%': 162.2521491770923, '50%': 3947.9895778580108, '75%': 33669.61925128018, 'max': 1070215494.2454535, 'gini': 93.00380501632345}, 'DAO': {'count': 417.0, 'mean': 4108789.879667778, 'std': 52856789.60340977, 'min': 62.41791720661045, '25%': 22420.88911116824, '50%': 98077.22817600382, '75%': 482841.8599313042, 'max': 1070215494.2454535, 'gini': 91.66623278835885}, 'Trading': {'count': 3723.0, 'mean': 439781.6134090972, 'std': 3168866.7782713966, 'min': 0.0, '25%': 480.89922466339414, '50%': 5818.257505125564, '75%': 47688.954123963136, 'max': 82337216.17015785, 'gini': 89.58203779887066}, 'LP': {'count': 4294.0, 'mean': 525533.9540819126, 'std': 3560669.6413960285, 'min': 0.0, '25%': 1240.2996485119652, '50%': 9177.636061750805, '75%': 71381.36399547386, 'max': 106336371.99141136, 'gini': 88.14462605228111}, 'UI Router': {'count': 4496.0, 'mean': 378865.7774388979, 'std': 2805799.3032914153, 'min': 0.0, '25%': 139.87848586039246, '50%': 3196.747409586344, '75%': 50191.35550755574, 'max': 114664216.3328957, 'gini': 88.73919415363477}, 'crvUSD': {'count': 1592.0, 'mean': 414913.53479430714, 'std': 2693237.6647417126, 'min': 0.0, '25%': 193.47988422782626, '50%': 12557.335331207054, '75%': 72781.16865282728, 'max': 62185869.715004876, 'gini': 86.51385699971244}, 'Lending': {'count': 785.0, 'mean': 632873.7421948916, 'std': 3729741.890571015, 'min': 0.0, '25%': 1725.0897164997743, '50%': 18172.07055853384, '75%': 132965.9677818724, 'max': 75033722.12469396, 'gini': 85.00952803571845}}, 'ethereum': {'All': {'count': 7107.0, 'mean': 609234.0779874095, 'std': 13145577.303587966, 'min': 0.0, '25%': 1116.3623594781693, '50%': 9715.921403263244, '75%': 66868.52641592699, 'max': 1070215494.2454535, 'gini': 91.16389826064089}, 'DAO': {'count': 417.0, 'mean': 4108789.879667778, 'std': 52856789.60340977, 'min': 62.41791720661045, '25%': 22420.88911116824, '50%': 98077.22817600382, '75%': 482841.8599313042, 'max': 1070215494.2454535, 'gini': 91.66623278835885}, 'Trading': {'count': 2907.0, 'mean': 535302.0687286841, 'std': 3560448.021083178, 'min': 0.0, '25%': 1551.4584149520947, '50%': 10260.602057143607, '75%': 71719.50456958206, 'max': 82337216.17015785, 'gini': 88.16710163746076}, 'LP': {'count': 3340.0, 'mean': 648723.4033800107, 'std': 4021564.623761027, 'min': 0.0, '25%': 2096.894162728181, '50%': 11892.034024401408, '75%': 92551.3706557737, 'max': 106336371.99141136, 'gini': 87.29172503924302}, 'UI Router': {'count': 2428.0, 'mean': 658976.9922064975, 'std': 3766021.6860406618, 'min': 0.0, '25%': 1837.6361395660392, '50%': 22334.09265788793, '75%': 170249.6535176591, 'max': 114664216.3328957, 'gini': 82.69328289245776}, 'crvUSD': {'count': 1592.0, 'mean': 414913.53479430714, 'std': 2693237.6647417126, 'min': 0.0, '25%': 193.47988422782626, '50%': 12557.335331207054, '75%': 72781.16865282728, 'max': 62185869.715004876, 'gini': 86.51385699971244}, 'Lending': {'count': 330.0, 'mean': 1242889.292095038, 'std': 5579827.312715267, 'min': 0.0, '25%': 6399.96261700189, '50%': 65366.29783091016, '75%': 400052.7700708124, 'max': 75033722.12469396, 'gini': 79.36502104583857}}, 'base': {'All': {'count': 1071.0, 'mean': 47310.4790447683, 'std': 395989.5707925387, 'min': 0.0, '25%': 38.60090999112731, '50%': 153.36584537103272, '75%': 702.3758372591544, 'max': 9328555.636957189, 'gini': 94.24970475237184}, 'Trading': {'count': 59.0, 'mean': 125621.10918093676, 'std': 385833.92004622915, 'min': 0.0, '25%': 94.38782094887667, '50%': 1180.333281013822, '75%': 16841.85866768038, 'max': 2293862.2213980225, 'gini': 79.32360810193855}, 'LP': {'count': 212.0, 'mean': 184120.34036192775, 'std': 787334.0029965537, 'min': 4.709292302519389, '25%': 261.1997081466834, '50%': 1701.7407770868017, '75%': 39261.26057551477, 'max': 9328555.636957189, 'gini': 82.58258038220853}, 'UI Router': {'count': 946.0, 'mean': 33060.668389715, 'std': 280269.9650843805, 'min': 0.104487782696644, '25%': 37.03280773461759, '50%': 114.50911336588712, '75%': 504.8963478876287, 'max': 5450718.501673011, 'gini': 94.93984791971232}}, 'xdai': {'All': {'count': 68.0, 'mean': 343277.34140015184, 'std': 1706100.5416513178, 'min': 0.0, '25%': 0.0, '50%': 5823.950550364936, '75%': 56833.76714076652, 'max': 13274363.92530237, 'gini': 86.6993240776658}, 'Trading': {'count': 45.0, 'mean': 171809.94414408604, 'std': 747261.6797102067, 'min': 0.0, '25%': 0.0, '50%': 38.29520315554702, '75%': 20915.772785427886, 'max': 4916935.413850532, 'gini': 85.84458562164338}, 'LP': {'count': 16.0, 'mean': 398649.3104086808, 'std': 1219173.3270166705, 'min': 0.0, '25%': 5896.612676969338, '50%': 30622.30489239929, '75%': 71894.90987885364, 'max': 4916935.413850532, 'gini': 74.26650171423141}, 'UI Router': {'count': 20.0, 'mean': 742950.0538762587, 'std': 2952383.958300686, 'min': 144.30867469415898, '25%': 7465.017073448261, '50%': 42794.19684894198, '75%': 102116.84665719458, 'max': 13274363.92530237, 'gini': 82.59311116506856}}, 'polygon': {'All': {'count': 924.0, 'mean': 75425.38588832015, 'std': 606873.9072936877, 'min': 0.0, '25%': 24.07618223324099, '50%': 46.757943591296154, '75%': 820.5524131090338, 'max': 13274363.92530237, 'gini': 94.50666892752687}, 'Trading': {'count': 159.0, 'mean': 67464.5903825625, 'std': 496003.3357138335, 'min': 0.0, '25%': 0.0, '50%': 9.997915810101676e-19, '75%': 42.53258847813619, 'max': 6013736.439764233, 'gini': 94.29768357737386}, 'LP': {'count': 266.0, 'mean': 217797.56170949934, 'std': 1071822.564635374, 'min': 0.0, '25%': 29.68355232146296, '50%': 707.5156526404969, '75%': 24011.672373054746, 'max': 13274363.92530237, 'gini': 87.61657906246991}, 'UI Router': {'count': 628.0, 'mean': 78962.73752570969, 'std': 677622.6776085607, 'min': 0.002498793516164595, '25%': 32.0989235768496, '50%': 51.37611797796019, '75%': 883.3397788679495, 'max': 13274363.92530237, 'gini': 94.96917990199447}}, 'optimism': {'All': {'count': 541.0, 'mean': 392158.7353054854, 'std': 2275572.2007336253, 'min': 0.0, '25%': 148.63714316433934, '50%': 1520.323249514907, '75%': 42968.728699051535, 'max': 31386986.48347734, 'gini': 88.56358663719783}, 'Trading': {'count': 158.0, 'mean': 283644.7182669223, 'std': 2502559.681638898, 'min': 0.0, '25%': 547.7931539561861, '50%': 752.3358010167792, '75%': 8334.704975582534, 'max': 31351997.864939034, 'gini': 92.55759169722289}, 'LP': {'count': 228.0, 'mean': 755210.9005945264, 'std': 3262481.9740867587, 'min': 0.0, '25%': 1575.5734709608503, '50%': 21817.974901350426, '75%': 251354.85949806136, 'max': 31386986.48347734, 'gini': 80.01617921025844}, 'UI Router': {'count': 304.0, 'mean': 297254.2666472331, 'std': 1300057.0488596437, 'min': 0.037542137143110825, '25%': 53.095412836200374, '50%': 2824.9738758024196, '75%': 59654.0872556127, 'max': 15946413.922058629, 'gini': 84.35764091115185}}, 'fraxtal': {'All': {'count': 105.0, 'mean': 863411.2796814222, 'std': 3059517.631805475, 'min': 106.39342686014115, '25%': 23582.462458032696, '50%': 100929.82375799336, '75%': 420905.38795364683, 'max': 28132242.635396738, 'gini': 68.88028800685666}, 'Trading': {'count': 19.0, 'mean': 418318.54123129277, 'std': 613794.1047027465, 'min': 1730.5277221772983, '25%': 74340.26682733628, '50%': 198152.13753544484, '75%': 406607.41207109985, 'max': 2563275.7455893364, 'gini': 24.359764913117687}, 'LP': {'count': 66.0, 'mean': 1087730.1519697257, 'std': 3634910.6297710156, 'min': 106.39342686014115, '25%': 29073.320232084137, '50%': 167413.72802897939, '75%': 500963.8478707409, 'max': 28132242.635396738, 'gini': 66.61630162049191}, 'UI Router': {'count': 79.0, 'mean': 551020.6057155096, 'std': 1540819.550244853, 'min': 106.39342686014115, '25%': 21465.391677635736, '50%': 80711.67715962842, '75%': 243333.10438647185, 'max': 10364781.104373708, 'gini': 65.91926058836462}}, 'fantom': {'All': {'count': 73.0, 'mean': 100165.3412852596, 'std': 608426.7592953411, 'min': 0.0, '25%': 0.0, '50%': 15.692373420763179, '75%': 1118.6832941968873, 'max': 4847781.810807218, 'gini': 94.21501176491884}, 'Trading': {'count': 39.0, 'mean': 53735.28453988252, 'std': 312903.5428228557, 'min': 0.0, '25%': 0.0, '50%': 0.0, '75%': 28.469913066178513, 'max': 1956175.4887285666, 'gini': 93.57170170940684}, 'LP': {'count': 22.0, 'mean': 328828.79634392005, 'std': 1091164.8991403915, 'min': 0.0, '25%': 74.13346151504206, '50%': 1275.2740970994278, '75%': 31215.94178168402, 'max': 4847781.810807218, 'gini': 82.39986223961697}, 'UI Router': {'count': 20.0, 'mean': 1002.8557335283303, 'std': 1705.0694420032048, 'min': 0.6294229801738925, '25%': 10.064173207232631, '50%': 99.96377592097971, '75%': 1168.2198876738983, 'max': 5196.119032425665, 'gini': 49.712058244646855}}};


function createWealthTable(selectedChain) {
    const data = chainDescData[selectedChain];
    if (!data) return '';

    let tableContent = `<table>
    <thead>
        <tr>
            <th>Metric</th>
            ${Object.keys(data).map(key => `<th>${key}</th>`).join('')}
        </tr>
    </thead>
    <tbody>`;

    const metrics = ['mean', '25%', '50%', '75%', 'gini'];
    const metricNames = {
        'mean': 'Mean',
        '25%': 'Q1 (25%)',
        '50%': 'Median',
        '75%': 'Q3 (75%)',
        'gini': 'Gini coefficient'
    };

    metrics.forEach(metric => {
        let row = `<tr><td>${metricNames[metric]}</td>`;
        Object.keys(data).forEach(category => {
            let value = data[category][metric];
            if (metric === 'gini') {
                value = value.toFixed(2);
            } else if (metric !== 'max') {
                value = formatCurrency(value);
            } else {
                value = formatCurrency(value, true);
            }
            row += `<td>${value}</td>`;
        });
        tableContent += row + '</tr>';
    });

    tableContent += '</tbody></table>';
    return tableContent;
}

function formatCurrency(value, isMax = false) {
    if (isMax) {
        return value >= 1e9 ? (value / 1e9).toFixed(1) + 'b' :
            value >= 1e6 ? (value / 1e6).toFixed(1) + 'm' :
                value >= 1e3 ? (value / 1e3).toFixed(1) + 'k' :
                    value.toFixed(2);
    }
    return value >= 1e6 ? (value / 1e6).toFixed(1) + 'm' :
        value >= 1e3 ? (value / 1e3).toFixed(1) + 'k' :
            value.toFixed(2);
}

window.createWealthTable = createWealthTable;